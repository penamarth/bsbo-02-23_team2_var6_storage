# Рамки: Информационная система склада

## Сценарий: Списание товаров

**Уровень:** Задача, определенная пользователем  
**Основной исполнитель:** Кладовщик

## Заинтересованные лица и их требования

### Кладовщик:
- Хочет быстро списать товар с указанием причины (брак, истечение срока годности, повреждение).
- Требует мгновенного обновления остатков после списания.
- Нуждается в подтверждении успешной операции.

### Система учета:
- Должна получать данные о списании в формате, совместимом с бухгалтерским ПО.
- Требует передачи артикула, количества, стоимости и причины списания.

## Предусловия
- Пользователь авторизован как Кладовщик.
- Товар существует в системе и отображен в интерфейсе.
- Система настроена с перечнем причин списания (брак, просрочка, повреждение).

## Результаты (Постусловия)
- Остатки товара в системе обновлены.
- Данные о списании переданы в Систему учета.
- Кладовщик видит актуальный баланс и подтверждение операции.

## Основной успешный сценарий
1. Кладовщик в интерфейсе выбирает раздел «Списание товаров».
2. Система отображает список товаров на складе с фильтрацией по артикулу/категории.
3. Кладовщик выбирает товар, указывает количество и причину списания (выпадающий список).
4. Система проверяет:
   - Достаточность остатков на складе.
   - Корректность заполнения обязательных полей.
5. При успешной проверке:
   - Система обновляет остатки в базе данных.
   - Формирует данные для передачи в Систему учета.
   - Система учета получает данные.
6. Кладовщику отображается уведомление «Списание выполнено» и обновленный список остатков.

## Расширения (альтернативные потоки)

### 1. Недостаточно товаров для списания
- Система обнаруживает, что запрашиваемое количество превышает остатки.
- Отображается ошибка: «Недостаточно товара. Доступно: [X] единиц».
- Кладовщик корректирует количество или отменяет операцию.

### 2. Ошибка передачи данных в Систему учета
- Система не может отправить данные из-за сетевой ошибки.
- Формируется задача в разделе «Ожидающие синхронизации».
- Администратор вручную повторяет отправку при восстановлении связи.

## Специальные требования

### Валидация в реальном времени:
- Проверка срока годности при выборе причины «просрочка».
- Автоматическое заполнение стоимости списания на основе данных из системы.

### Интеграция с Системой учета:
- Шифрование данных при передаче.

### Уведомления:
- Подтверждение операции в интерфейсе.

### Аудит:
- Логирование операции с указанием времени, пользователя и причины.

## Частота использования
- Списание по браку/просрочке: Высокая (ежедневно, среднее количество операций в день).
- Повторная синхронизация с Системой учета: Низкая (1–2 раза в неделю при ошибках).

## Открытые вопросы
- Какие поля обязательны для передачи в Систему учета?
- Нужно ли ограничить количество списаний в сутки для одного кладовщика?
- Как обрабатывать частичное списание товара (например, 5 из 10 единиц)?
- Требуется ли подтверждение операции через SMS при списании >100 единиц?
- Какие данные должны храниться в логах для аудита?